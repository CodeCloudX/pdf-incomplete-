<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Dynamic Title -->
    <title>{% block title %}PDFMaster Pro - Professional PDF Tools{% endblock %}</title>

    <!-- SEO Meta Tags -->
    <meta name="description" content="PDFMaster Pro - Advanced PDF tools for professionals. Merge, split, compress, convert and protect PDFs online.">
    <meta name="keywords" content="PDF, Merge PDF, Split PDF, Compress PDF, Convert PDF, PDF to Word, PDF to Excel, Secure PDF">
    <meta name="author" content="PDFMaster Pro">
    <meta name="robots" content="index, follow">

    <!-- Open Graph / Social Sharing -->
    <meta property="og:title" content="PDFMaster Pro - Professional PDF Tools">
    <meta property="og:description" content="Streamline your document workflow with our enterprise-grade PDF tools.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="{{ request.url_root }}">
    <meta property="og:image" content="{{ url_for('static', filename='images/og-image.png') }}">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">

    <!-- Favicon & Theme -->
    <link rel="icon" href="{{ url_for('static', filename='images/favicon.ico') }}" type="image/x-icon">
    <link rel="apple-touch-icon" href="{{ url_for('static', filename='images/apple-touch-icon.png') }}">
    <meta name="theme-color" content="#0d6efd">

    <!-- Preload critical resources -->
    <link rel="preconnect" href="https://cdn.jsdelivr.net">
    <link rel="preconnect" href="https://cdnjs.cloudflare.com/ajax/libs">
    <link rel="preconnect" href="https://fonts.googleapis.com">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/index.css') }}">
    
    {% block extra_css %}{% endblock %}
</head>
<body>
    <!-- Navigation -->
    {% include 'partials/navbar.html' %}

    <!-- Main Content -->
    <main class="min-vh-100">
        {% block content %}{% endblock %}
    </main>

    <!-- Footer (conditionally rendered) -->
    {% if not hide_footer %}
        {% include 'partials/footer.html' %}
    {% endif %}

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>

    <!-- Navigation Active State Script -->
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        const currentLocation = location.pathname;
        const navLinks = document.querySelectorAll('.navbar-nav .nav-link');

        navLinks.forEach(link => {
            link.classList.remove('active');

            // Special case: Tools link on index.html scroll
            if (link.getAttribute('href') === '/tools' && currentLocation === '/') {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const targetElement = document.querySelector('#tools-section');
                    if (targetElement) {
                        window.scrollTo({
                            top: targetElement.offsetTop - 80,
                            behavior: 'smooth'
                        });
                        history.pushState(null, null, '#tools-section');

                        navLinks.forEach(l => l.classList.remove('active'));
                        link.classList.add('active');
                    }
                });
            } else if (link.href === window.location.href) {
                link.classList.add('active');
            }
        });

        // Smooth scroll for other anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const targetId = this.getAttribute('href');
                if (targetId !== '#') {
                    const targetElement = document.querySelector(targetId);
                    if (targetElement) {
                        window.scrollTo({
                            top: targetElement.offsetTop - 80,
                            behavior: 'smooth'
                        });
                        history.pushState(null, null, targetId);

                        navLinks.forEach(link => link.classList.remove('active'));
                        if (this.classList.contains('nav-link')) {
                            this.classList.add('active');
                        }
                    }
                }
            });
        });
    });
    </script>

    <!-- Custom JS -->
    <script src="{{ url_for('static', filename='js/index.js') }}"></script>

    {% block extra_js %}{% endblock %}
</body>
</html>
